async function getDocumentsOrderedByField(e,a){try{var n=await e.orderBy(a,"desc").get();if(n.empty)return console.log("No matching documents."),[];let o=[];return n.forEach(e=>{o.push({id:e.id,data:e.data()})}),o}catch(e){return console.error("Error retrieving documents: ",e),[]}}async function updateIfGreater(e,n,t,r){try{await e.runTransaction(async e=>{var o=await e.get(n);if(!o.exists)throw new Error("Document does not exist!");var a=[o.data().game1||0,o.data().game2||0,o.data().game3||0],o=(a.sort(function(e,o){return o-e}),o.data()[t]||0);o<r?(e.update(n,{[t]:r,maior:a[0]<r?r:a[0]}),console.log("Field updated because the new value is greater.")):console.log("Field not updated because the new value is not greater.")})}catch(e){console.error("Transaction failed: ",e)}}function addOrUpdateDocument(o,a){try{o.get().then(e=>{e.exists?(console.log("update",o),o.update({name:a.name,email:a.email,empresa:a.empresa,informativo:a.informativo,uid:a.uid}).then(()=>{console.log("Document successfully update!")}).catch(e=>{console.error("Error update: ",e)})):(console.log("set",o),o.set({name:a.name,email:a.email,empresa:a.empresa,informativo:a.informativo,uid:a.uid}).then(()=>{console.log("Document successfully written!")}).catch(e=>{console.error("Error writing document: ",e)}))}).catch(e=>{console.log("Error set:",e)})}catch(e){console.error("Erro ao adicionar ou atualizar documento: ",e)}}function listenToUpdates(e,o){let a=!0;e.onSnapshot(e=>{a?a=!1:e.docChanges().forEach(e=>{"added"===e.type&&(console.log("New document: ",e.doc.data()),o(e)),"modified"===e.type&&(console.log("Modified document: ",e.doc.data()),o(e))})},e=>{console.log("Encountered error: "+e)})}window.firebaseConfig={apiKey:"AIzaSyC6r6ivnQ7Lx1Hikb_YNdQxf3lj2XOGkWA",authDomain:"febraban-v1.firebaseapp.com",databaseURL:"https://febraban-v1-default-rtdb.firebaseio.com",projectId:"febraban-v1",storageBucket:"febraban-v1.appspot.com",messagingSenderId:"824190571881",appId:"1:824190571881:web:370fe41aa5d1ece5ab19f8",measurementId:"G-1NV8HNSJZJ"},window.initFirebase=!1,$(document).ready(function(){var e;window.initFirebase||(e=firebase.initializeApp(window.firebaseConfig),window.db=e.firestore(),window.collectionDB=window.db.collection("usuarios"),window.initFirebase=!0)}),bridge.handlerFormDB=function(e){addOrUpdateDocument(window.collectionDB.doc(e.email),e)},bridge.handlerGameDB=function(e,o,a){e=window.collectionDB.doc(e);updateIfGreater(window.db,e,o,a)},bridge.listRankingDB=function(o){getDocumentsOrderedByField(window.collectionDB,"maior").then(e=>{console.log("Documents ordered by field in descending order:"),o(e)}).catch(e=>{console.error("Error in getDocumentsOrderedByField: ",e)})},bridge.handlerSnapshotFormDB=function(e){listenToUpdates(window.collectionDB,e)};
//# sourceMappingURL=useFirebase.js.map
