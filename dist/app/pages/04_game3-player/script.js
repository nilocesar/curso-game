const measures={canvasW:920,canvasH:910},allOrientations=["horizontal","horizontalBack","vertical","verticalUp","diagonal","diagonalUp","diagonalBack","diagonalUpBack"],gameCurrent=3,timeGame=60;let workAll=0;const pointMulti=10,definedWords=["Compliance","Crédito","ESG","LGPD","SAC","PLDFT","Libras","Sustentabilidade","Preparatório","Correspondentes"];function countWord(t){workAll+=t}function activeTime(){window.countdownTimer(timeGame,()=>{$("body").trigger("game",[gameCurrent,workAll*pointMulti])})}function completeWord(){setTimeout(function(){$("body").trigger("game",[gameCurrent,workAll*pointMulti])},1e3)}function gameWordSearch(){$(".info .value").text("01:00");var t={Game:function(t){var i=this;this.words=[],this.wordsBase=definedWords,$.each(this.wordsBase,function(t,e){i.words.push(i.removerAcentos(e).toLowerCase())}),this.letters=["A","B","C","D","E","F","G","H","I","J","K","L","M","N","O","P","Q","R","S","T","U","V","W","X","Y","Z","Ç","Ã","É","Ó"],this.puzzle=null,this.solution=null,this.wordList={},this.puzzleWidth=-1,this.puzzleHeight=-1,this.tileWidth=100,this.tileHeight=100,this.drawLineColor=65280,this.drawLineAlpha=.6,this.drawLineThickness=26,this.highlightTintContainer=["#D9F339","#D9F339","#D9F339","#D9F339","#D9F339","#D9F339","#D9F339","#D9F339","#D9F339","#D9F339"],this.highlightTintIndice=0,this.highlightTint=16776960,this.drawLine=null,this.isSelecting=!1,this.firstLetter=null,this.endLetter=null,this.foundWords=[]}};t.Game.prototype={preload:function(){this.load.path="../../assets/img/game3/",this.load.bitmapFont("azo");var i=this;this.letters.forEach(function(t){var e=t;"Ã"==t?e="A1":"Ç"==t?e="C1":"É"==t?e="E1":"Ó"==t&&(e="O1"),i.load.spritesheet(t.toLowerCase(),e+".png",i.tileWidth,i.tileHeight)}),this.scaleRatio=window.devicePixelRatio/3,i.scale.scaleMode=Phaser.ScaleManager.SHOW_ALL,i.scale.setShowAll(),window.addEventListener("resize",function(){i.scale.refresh()}),i.scale.refresh()},create:function(){this.stage.backgroundColor="#ffffff",activeTime(),-1!==this.puzzleWidth?this.puzzle=wordfind.newPuzzle(this.words,{width:this.puzzleWidth,height:this.puzzleHeight,orientations:allOrientations}):(this.puzzle=wordfind.newPuzzle(this.words,{orientations:allOrientations}),this.puzzleWidth=this.puzzle[0].length,this.puzzleHeight=this.puzzle.length);var t=wordfind.solve(this.puzzle,this.words),i=(this.solution=t.found,0),r=0,s=this,i=(this.grid=this.add.group(),this.grid.inputEnableChildren=!0,this.puzzle.forEach(function(t){t.forEach(function(t){var e=s.grid.create(i,r,t,0);e.data.row=i/s.tileWidth,e.data.column=r/s.tileHeight,e.data.words={},e.data.letter=t,e.data.startWord=!1,e.events.onInputDown.add(s.startLetterSelect,s),e.events.onInputUp.add(s.stopLetterSelect,s),e.events.onInputOver.add(s.overLetter,s),e.events.onInputOut.add(s.outLetter,s),i+=s.tileWidth}),i=0,r+=s.tileHeight}),this.solution.forEach(function(t){var e=t.y*s.puzzleWidth+t.x,e=s.grid.getChildAt(e);e.data.startWord=!0,e.data.words[t.word]={orientation:t.orientation,length:t.word.length}}),this.grid.x=45,this.grid.y=45,this.grid.width=827,this.grid.height=816,40),r=880;const n=document.querySelector("ul.listPalavras");n?this.solution.forEach((t,e)=>{var i=document.createElement("li");i.textContent=this.wordsBase[e],n.appendChild(i),(this.wordList[t.word]=i).classList.add("word")}):console.error("A lista de palavras (ul.listPalavras) não foi encontrada no DOM."),this.drawLine=this.add.graphics(0,0),this.input.addMoveCallback(this.updateDrawLine,this)},updateDrawLine:function(t,e,i){var r,s;this.isSelecting&&(this.drawLine.clear(),this.drawLine.lineStyle(this.drawLineThickness,this.drawLineColor,this.drawLineAlpha),r=this.tileWidth*this.firstLetter.worldScale.x/2,s=this.tileHeight*this.firstLetter.worldScale.y/2,this.drawLine.moveTo(this.firstLetter.worldPosition.x+r,this.firstLetter.worldPosition.y+s),this.drawLine.lineTo(e,i))},startLetterSelect:function(t){this.isSelecting=!0,this.firstLetter=t},stopLetterSelect:function(t){var e;this.isSelecting=!1,this.firstLetter&&this.endLetter&&this.firstLetter!==this.endLetter&&(this.firstLetter.data.startWord||this.endLetter.data.startWord)&&this.checkLetterAlignment(this.endLetter)&&((e=this.checkSelectedLetters())&&(this.highlightCorrectWord(e),this.foundWords.push(e.word)),this.foundWords.length===this.solution.length)&&this.gameWon(),this.grid.setAll("frame",0),this.clearLine()},clearLine:function(){this.firstLetter=!1,this.endLetter=null,this.drawLine.clear()},highlightCorrectWord:function(t){countWord(1);var e=this.highlightTintContainer[this.highlightTintIndice],i=(this.wordList[t.word].fill=e,this.wordList[t.word]);i?i.classList.add("visited"):console.error("Elemento não encontrado para a palavra-chave:",t.word),t.letters.forEach(function(t){t.tint=e.replace("#","0x")}),this.highlightTintIndice+=1},overLetter:function(t){var e;this.isSelecting?this.checkLetterAlignment(t)&&(this.endLetter=t,e=this.getSelectedLetters())&&0<e.letters.length&&(this.grid.setAll("frame",0),e.letters.forEach(function(t){t.frame=1})):t.frame=1},outLetter:function(t){this.isSelecting||(t.frame=0)},gameWon:function(t){completeWord()},checkLetterAlignment:function(t){var e=this.firstLetter.data.row,i=this.firstLetter.data.column,r=t.data.row,t=t.data.column;return i===t||e===r||Math.abs(t-i)===Math.abs(r-e)},getLetterAt:function(t,e){e=e*this.puzzleWidth+t;return this.grid.getChildAt(e)},getSelectedLetters:function(){if(!this.firstLetter||!this.endLetter||this.endLetter===this.firstLetter)return!1;var t,e,i,r,s,n,o,a=this.firstLetter.data,h=this.endLetter.data,l=[],d="";if(a.row===h.row)for(r=Math.min(a.column,h.column),s=Math.max(a.column,h.column),i=r;i<=s;i++)t=this.getLetterAt(a.row,i),l.push(t),d=d.concat(t.data.letter);else if(a.column===h.column)for(n=Math.min(a.row,h.row),o=Math.max(a.row,h.row),e=n;e<=o;e++)t=this.getLetterAt(e,a.column),l.push(t),d=d.concat(t.data.letter);else if(r=Math.min(a.column,h.column),s=Math.max(a.column,h.column),n=Math.min(a.row,h.row),o=Math.max(a.row,h.row),a.column>h.column&&a.row<h.row)for(i=s,e=n;e<=o;e++)t=this.getLetterAt(e,i),l.push(t),d=d.concat(t.data.letter),i--;else if(a.column<h.column&&a.row<h.row)for(i=r,e=n;e<=o;e++)t=this.getLetterAt(e,i),l.push(t),d=d.concat(t.data.letter),i++;else if(a.column<h.column&&a.row>h.row)for(i=r,e=o;n<=e;e--)t=this.getLetterAt(e,i),l.push(t),d=d.concat(t.data.letter),i++;else{if(!(a.column>h.column&&a.row>h.row))return!1;for(i=s,e=o;n<=e;e--)t=this.getLetterAt(e,i),l.push(t),d=d.concat(t.data.letter),i--}return{word:d,inverse:Phaser.Utils.reverseString(d),letters:l}},checkSelectedLetters:function(){var t,e=this.getSelectedLetters();if(e)for(t in(this.firstLetter.data.startWord?this.firstLetter:this.endLetter).data.words)if(t===e.word||t===e.inverse)return{word:t,letters:e.letters};return!1},removerAcentos:function(t){var e={"â":"a","Â":"A","à":"a","À":"A","á":"a","Á":"A","ê":"e","Ê":"E","è":"e","È":"E","î":"i","Î":"I","ì":"i","Ì":"I","í":"i","Í":"I","õ":"o","Õ":"O","ô":"o","Ô":"O","ò":"o","Ó":"O","ü":"u","Ü":"U","û":"u","Û":"U","ú":"u","Ú":"U","ù":"u","Ù":"U"};return t.replace(/[\W\[\] ]/g,function(t){return e[t]||t})}},new Phaser.Game(measures.canvasW,measures.canvasH,Phaser.CANVAS,"game").state.add("WordSearch.Game",t.Game,!0)}$(document).ready(function(){gameWordSearch()});
//# sourceMappingURL=script.js.map
